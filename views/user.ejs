<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= user.username %> Dashboard's</title>
  <link rel="stylesheet" href="/styles/styles.css">
</head>

<body>
  <%- include('navbar') %>
  <div>Hello, <%= user.username %></div>
  <div>You have <%= user.Folders.length %> folders.</div>
  <% user.Folders.forEach((folder) => { %>
  <div>
    <div><%= folder.name %></div>
    <form action="/update" method="POST">
      <input name="id" type="hidden" value="<%= folder.id %>">
      <input name="action" type="hidden" value="ask">
      <button>Update</button>
    </form>
    <form action="/delete" method="POST">
      <input name="id" type="hidden" value="<%= folder.id %>">
      <button>Delete</button>
    </form>
    <% if (folder.ShareLink && folder.ShareLink.expire > new Date()) { %>
    <a href="/share/<%= folder.ShareLink.link %>">Share Link</a>
    <% } else { %>
    <form action="/share" method="POST">
      <label for="exDate">Choose link's duration</label>
      <select name="exDate" id="exDate">
        <option value="hours">24h</option>
        <option value="days">10 days</option>
        <option value="month">1 month</option>
      </select>
      <input name="folder" type="hidden" value="<%= folder.id %>">
      <button>Create Link</button>
    </form>
    <% } %>
    <% folder.Files.forEach((file) => { %>
    <a href="/user/<%= folder.id %>/<%= file.id %>"> <img src="<%= file.url %>" alt="<%= file.name %>"></a>
    <% }) %>
  </div>
  <% }) %>
  <a href="/new">Add new folders/files</a>
</body>

</html>